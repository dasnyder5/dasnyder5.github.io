---
layout: default
title: FlowDrone
permalink: /flowdrone/
description: Wind Estimation and Gust Rejection via Omnidirectional Flow Sensing
img: assets/img/x500/X500.jpg_original
importance: 1
category: work
---

<h1><center><span style="font-weight:bold;">FlowDrone: </span>Wind Estimation and<br>Gust Rejection on UAVs using Fast-response Hot-wire Flow Sensors</center></h1>
<br>
<table style="width: 80%; max-width: 800px; margin: 0 auto;">
    <tr>
        <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://natesimon.github.io/" target="_blank">Nathaniel Simon</a></span>
        </td>
        <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://allenzren.github.io/" target="_blank">Allen Z. Ren</a></span>
        </td>
    </tr>
</table>
<table style="width: 60%; max-width: 800px; margin: 0 auto;">
    <tr>
            <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://www.linkedin.com/in/alexander-piqu%C3%A9-789317112/" target="_blank">Alexander Piqué</a></span>
        </td>
    </tr>
</table>
<table style="width: 60%; max-width: 800px; margin: 0 auto;">
    <tr>
        <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://www.linkedin.com/in/david-snyder-a25387bb/" target="_blank">David Snyder</a></span>
        </td>
        <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://www.linkedin.com/in/daphne-barretto/" target="_blank">Daphne Barretto</a></span>
        </td>
    </tr>
    <tr>
        <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://irom-lab.princeton.edu/majumdar/" target="_blank">Anirudha Majumdar</a></span>
        </td>
        <td style="text-align: center; width: 100px;">
            <span style="font-size: 22px; font-weight:bold;"><a href="https://mae.princeton.edu/people/faculty/hultmark" target="_blank">Marcus Hultmark</a></span>
        </td>
    </tr>
    <tr>
    <td align=center width=40px><center><span style="font-size:28px">
        <a href="https://irom-lab.princeton.edu/">
            <img src="../assets/img/irom_lab_logo.png" alt="IRoM" style="width: 80%;">
        </a></span></center>
    </td>
    <td align=center width=40px><center><span style="font-size:28px">
        <a href="https://fluids.princeton.edu/" target="_blank"><img src="../assets/img/fast_lab_logo.jpg" alt="FAST Lab Logo" style="width: 30%;"></a></span></center>
    </td>
    </tr>
</table>
<td align=center style="width: 80%; max-width: 800px; margin: 0 auto; text-align: center;">
<p style="margin-top: 2px;"></p>
<center><span style="font-size:30px"><a href="https://robo.princeton.edu/" target="_blank">Princeton University</a></span></center>
</td>
<table style="width: 70%; max-width: 800px; margin: 0 auto;">
    <tr>
    <td align=center width=20px><center><span style="font-size:28px">
        <a href="https://arxiv.org/abs/2210.05857" target="_blank"><img src="../assets/img/PDF_file_icon.png" alt="PDF File Icon" style="max-width: 50px; height: auto;"></a></span></center>
    </td>
    <td align=center width=20px><center><span style="font-size:28px">
        <a href="https://youtu.be/uw0p1I9V2CM" target="_blank"><img src="../assets/img/YouTube_full-color_icon_(2017).png" alt="Youtube Play Icon" style="max-width: 50px; height: auto;"></a></span></center>
    </td></tr>
    <tr>
    <td align=center width=20px><center><span style="font-size:28px"><a href="https://arxiv.org/abs/2210.05857">[PDF]</a></span></center></td>
    <td align=center width=20px><center><span style="font-size:28px"><a href="https://youtu.be/uw0p1I9V2CM">[Video]</a></span></center></td>
    </tr>
</table>
<table style="width: 60%; max-width: 800px; margin: 0 auto;">
    <tr>
        <td align="center" width="40px">
            <span style="font-size:28px;">
                <a href="https://thenounproject.com/icon/binoculars-5031330/" target="_blank">
                    <img src="../assets/img/mononav/noun-binoculars-5031330.png" alt="Image Description" style="max-width: 50px; height: auto;">
                </a>
            </span>
        </td>
        <td align="center" width="40px">
            <span style="font-size:28px;">
                <p style="font-size: 20px;">
                    <b>In Proceedings:</b> <a href="https://www.icra2023.org/">ICRA 2023</a>.
                </p>
            </span>
        </td>
    </tr>
    <tr>
        <td align="center" width="40px">
            <span style="font-size:28px;">
                <a href="https://www.svgrepo.com/show/324526/drone.svg" target="_blank">
                    <img src="../assets/img/flowdrone/drone_icon.png" alt="Image Description" style="max-width: 50px; height: auto;">
                </a>
            </span>
        </td>
        <br>
        <td align="center" width="40px">
            <span style="font-size:28px;">
                <p style="font-size: 20px;">
                    <b>Hardware <a href="/projects/flowdrone_build_guide">Build Guide</a>.</b>
                </p>
            </span>
        </td>
    </tr>
</table>
<br>

<div class="row mt-3">
    <div class="col-sm col-12 mt-3 mt-md-0 d-flex justify-content-center">
        <div class="embed-responsive embed-responsive-16by9" style="width: 100%; max-width: 800px; margin: 0 auto;">
            <iframe class="embed-responsive-item rounded z-depth-1" src="https://www.youtube.com/embed/uw0p1I9V2CM"></iframe>
        </div>
    </div>
</div>
This video, "Improving Drone Performance in Wind with Novel, Fast, Sensors" received an Outstanding Presentation Award ($1,500) at the [2023 Princeton Research Day](https://researchday.princeton.edu/present/awards/2023-award-winners).
<br>
<div style="font-size: 18px; width: 100%; max-width: 800px; margin: 0 auto; text-align:justify">
<b>Abstract:</b> Unmanned aerial vehicles (UAVs) are finding use in applications that place increasing emphasis on robustness to external disturbances including extreme wind. However, traditional multirotor UAV platforms do not directly sense wind; conventional flow sensors are too slow, insensitive, or bulky for widespread integration on UAVs. Instead, drones typically observe the effects of wind indirectly through accumulated errors in position or trajectory tracking. In this work, we integrate a novel flow sensor based on micro-electro-mechanical systems (MEMS) hot-wire technology developed in our prior work onto a multirotor UAV for wind estimation. These sensors are omnidirectional, lightweight, fast, and accurate. In order to achieve superior tracking performance in windy conditions, we train a ‘wind-aware’ residual-based controller via reinforcement learning using simulated wind gusts and their aerodynamic effects on the drone. In extensive hardware experiments, we demonstrate the wind-aware controller outperforming two strong ‘wind-unaware’ baseline controllers in challenging windy conditions.
</div>
<br>
<center><h2>FlowDrone System Overview</h2></center>
<div style="text-align: center; max-width: 800px; margin: 0 auto;">
    <p style="margin-top: 4px;"></p>
    <a href="../../assets/img/flowdrone/flowdrone_system.png">
        <img src="../../assets/img/flowdrone/flowdrone_system.png" alt="FlowDrone System" style="width: 100%;">
    </a>
</div>
<br>
<div style="font-size: 18px; width: 100%; max-width: 800px; margin: 0 auto; text-align:justify">
    FlowDrone uses MAST (MEMS Anemometry Sensing Tower), our novel omnidirectional flow sensor, to estimate a wind vector onboard the drone. MAST functions using micro-electro-mechanical (MEMS) hot-wires, which have a sensing bandwidth of 500+ Hz, significantly faster than conventional pressure-based or ultrasonic methods. The MAST voltages are read into the Raspberry Pi, and a neural network sensor model (trained on wind-tunnel data) estimates a corresponding wind direction and magnitude. A short time series of wind data, in addition to the drone's state (from the flight computer), is fed into a learning-based control policy. The output of the control policy is a body rate and thrust setpoint, which is sent back to the flight controller and determines how the drone should react to the incoming gust.
</div>
<br>
<center><h2>Wind-Aware Control</h2></center>
<div style="text-align: center; max-width: 800px; margin: 0 auto;">
    <p style="margin-top: 4px;"></p>
    <a href="../../assets/img/flowdrone/flowdrone_controller.png">
        <img src="../../assets/img/flowdrone/flowdrone_controller.png" alt="FlowDrone Controller" style="width: 100%;">
    </a>
</div>
<br>
<div style="font-size: 18px; width: 100%; max-width: 800px; margin: 0 auto; text-align:justify">
    The wind-aware control policy is comprised of two parts: a standard attitude PID controller, and a residual policy that augments the attitude PID controller with learned gust rejection. This captures the baseline behavior of the attitude PID controller, while giving the policy an opportunity to learn and use additional information from the MAST flow sensors. The residual policy is learned <a href="https://github.com/utiasDSL/gym-pybullet-drones">in simulation</a> using reinforcement learning, in a variety of simulated wind gusts. The residual policy takes as input a short history of wind estimates, and thus has the opportunity to learn wind structure and ultimately to predict the forces acting on the drone.
</div>
<br>
<center><h2>Results: Gust Rejection</h2></center>
<div style="font-size: 18px; width: 100%; max-width: 800px; margin: 0 auto; text-align:justify">
    We compare the performance of our wind-aware controller against two strong baselines. The first baseline (wind-unaware) has the opportunity to learn a residual policy in the same simulated gusts, but without the MAST flow sensor. Any performance improvements of wind-aware over wind-unaware validate the benefit of MAST. The second baseline (baseline) are simply the attitude PID controller, with no learned residual component. Any improvements over baseline validate the benefit of the learned residual policy.
</div>
<div style="text-align: center; max-width: 800px; margin: 0 auto;">
    <p style="margin-top: 4px;"></p>
    <a href="../../assets/img/flowdrone/flowdrone_results.png">
        <img src="../../assets/img/flowdrone/flowdrone_results.png" alt="FlowDrone Results" style="width: 100%;">
    </a>
</div>
<br>
<div style="font-size: 18px; width: 100%; max-width: 800px; margin: 0 auto; text-align:justify">
    Across 15x trials, we see that wind-aware (ours -- in blue) outperforms wind-unaware, which in turn outperforms baseline. We see that wind-aware both deviates the least during the gust (Left), and also maintains a tighter concentration around the position setpoint throughout the gust (Right). These experiments demonstrate the benefits of fast flow sensing for the purposes of flow prediction and gust rejection onboard UAVs.
</div>
<br>
<div style="font-size: 18px; width: 100%; max-width: 800px; margin: 0 auto; text-align:justify">
    <h3><strong>Citing our Work:</strong></h3>
    <p> If you find our work to be relevant to your research, please consider citing our pair of papers:</p>
</div>

<div class="publications">
<!-- <h2>selected publications</h2> -->
{% bibliography -f papers -q @*[title=Fast-response hot-wire flow sensors for wind and gust estimation on UAVs] %}
{% bibliography -f papers -q @*[title=FlowDrone: wind estimation and gust rejection on UAVs using fast-response hot-wire flow sensors] %}
</div>

<br>
<h3><strong><a href="/projects/flowdrone_build_guide/">Build Guide</a></strong></h3>
 

For detailed instructions on how we built FlowDrone, check out our [Build Guide](/projects/flowdrone_build_guide/)!